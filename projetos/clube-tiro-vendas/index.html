<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>RangeClub Demo ‚Äî Sistema de Vendas</title>
    <link rel="icon" type="image/svg+xml" href="img/logo-rangeclub-demo.svg" />
    <link rel="stylesheet" href="Css/styles.css" />
    <!-- Supabase JS (CDN) - carregado de forma segura; se n√£o carregar, o sistema segue usando localStorage -->
    <script
      defer
      src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"
    ></script>
    <!-- Moment.js para formata√ß√£o de datas -->
    <script
      defer
      src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.4/moment.min.js"
    ></script>
    <!-- Numeral.js para formata√ß√£o de valores monet√°rios -->
    <script
      defer
      src="https://cdnjs.cloudflare.com/ajax/libs/numeral.js/2.0.6/numeral.min.js"
    ></script>

    <script defer src="Js/envLoader.js"></script>
    <script defer src="Js/config.js"></script>
    <script defer src="Js/api.js"></script>
  </head>
  <body>
    <div class="container">
      <header>
        <div class="logo-container">
          <img
            src="img/logo-rangeclub-demo.svg"
            alt="Logo RangeClub Demo"
            class="logo"
          />
          <h1>RangeClub Demo ‚Äî Sistema de Vendas</h1>
        </div>
        <nav>
          <button
            class="nav-btn active"
            onclick="showSection('cadastro', this)"
            data-section="cadastro"
          >
            Cadastro
          </button>
          <button
            class="nav-btn"
            onclick="showSection('comandas', this)"
            data-section="comandas"
          >
            Comandas Abertas
          </button>
          <button
            class="nav-btn"
            onclick="showSection('produtos', this)"
            data-section="produtos"
          >
            Produtos
          </button>
          <button
            class="nav-btn"
            onclick="showSection('filiados', this)"
            data-section="filiados"
          >
            Filiados
          </button>
          <button
            class="nav-btn"
            onclick="showSection('relatorios', this)"
            data-section="relatorios"
          >
            Relat√≥rios
          </button>
          <a href="../../portifolio/index.html" class="nav-btn portfolio-btn">
            üè† Portf√≥lio
          </a>
        </nav>
      </header>

      <!-- Se√ß√£o de Cadastro -->
      <section id="cadastro" class="section active">
        <div class="card">
          <h2>Cadastro de Cliente</h2>

          <!-- Busca de Filiados -->
          <div class="filiados-section">
            <h3>Buscar Filiado</h3>
            <div class="form-group">
              <label for="buscarFiliado">Buscar por Nome, CPF ou CR:</label>
              <input
                type="text"
                id="buscarFiliado"
                placeholder="Digite para buscar..."
                autocomplete="off"
                aria-controls="listaFiliados"
                aria-autocomplete="list"
              />
              <div
                id="buscarFiliadoResultados"
                class="autocomplete-panel"
                aria-live="polite"
              ></div>
            </div>

            <div class="form-group">
              <label for="listaFiliados">Selecionar Filiado:</label>
              <select id="listaFiliados">
                <option value="">Selecione um filiado...</option>
              </select>
            </div>

            <div class="inline-actions">
              <button
                type="button"
                class="btn btn-secondary"
                onclick="limparFormularioCliente()"
              >
                Limpar Sele√ß√£o
              </button>
              <button
                type="button"
                class="btn btn-primary"
                onclick="abrirQuickFiliado()"
              >
                Cadastrar Novo Filiado
              </button>
            </div>
          </div>

          <hr class="separator-crimson" />

          <form id="clienteForm">
            <div class="cadastro-form form-cliente">
              <div class="field field-nome">
                <label for="nome">Nome Completo</label>
                <input
                  type="text"
                  id="nome"
                  placeholder="Informe o nome completo"
                  autocomplete="name"
                  required
                />
              </div>
              <div class="field field-cpf">
                <label for="cpf">CPF</label>
                <input
                  type="text"
                  id="cpf"
                  placeholder="000.000.000-00"
                  inputmode="numeric"
                  maxlength="14"
                  autocomplete="off"
                  required
                />
              </div>
              <div class="field field-cr">
                <label for="cr">N√∫mero do CR</label>
                <input
                  type="text"
                  id="cr"
                  placeholder="Ex.: 123456"
                  autocomplete="off"
                  required
                />
              </div>
              <div class="field field-status">
                <label for="filiado">Status</label>
                <select id="filiado" required>
                  <option value="">Selecione...</option>
                  <option value="true">Filiado</option>
                  <option value="false">N√£o Filiado</option>
                </select>
              </div>
              <div class="actions cadastro-actions">
                <button type="submit" class="btn btn-primary">
                  Iniciar Comanda
                </button>
              </div>
            </div>
          </form>
        </div>
      </section>

      <!-- Se√ß√£o de Comandas Abertas -->
      <section id="comandas" class="section">
        <div class="card">
          <h2>Comandas Abertas</h2>
          <div id="comandasAbertas"></div>
        </div>
      </section>

      <!-- Se√ß√£o de Produtos -->
      <section id="produtos" class="section">
        <div class="card">
          <h2>Gerenciar Produtos</h2>
          <div class="produto-form">
            <h3>Adicionar Produto</h3>
            <form id="produtoForm">
              <div class="cadastro-form form-produto">
                <div class="field field-nome">
                  <label for="nomeProduto">Nome do Produto</label>
                  <input
                    type="text"
                    id="nomeProduto"
                    placeholder="Ex.: Muni√ß√£o 9mm"
                    required
                  />
                </div>
                <div class="field field-preco">
                  <label for="precoFiliado">Pre√ßo Filiado</label>
                  <input
                    type="number"
                    id="precoFiliado"
                    placeholder="0,00"
                    step="0.01"
                    required
                  />
                </div>
                <div class="field field-preco">
                  <label for="precoNaoFiliado">Pre√ßo N√£o Filiado</label>
                  <input
                    type="number"
                    id="precoNaoFiliado"
                    placeholder="0,00"
                    step="0.01"
                    required
                  />
                </div>
                <div class="actions cadastro-actions">
                  <button type="submit" class="btn btn-secondary">
                    Adicionar Produto
                  </button>
                </div>
              </div>
            </form>
          </div>
          <div id="listaProdutos"></div>
        </div>
      </section>

      <!-- Se√ß√£o de Filiados -->
      <section id="filiados" class="section">
        <div class="card">
          <h2>Gerenciar Filiados</h2>
          <div class="filiado-form">
            <h3>Adicionar Filiado</h3>
            <form id="filiadoForm">
              <div class="cadastro-form form-filiado">
                <div class="field field-nome">
                  <label for="nomeFiliado">Nome Completo</label>
                  <input
                    type="text"
                    id="nomeFiliado"
                    placeholder="Informe o nome completo"
                    autocomplete="name"
                    minlength="3"
                    required
                  />
                </div>
                <div class="field field-cpf">
                  <label for="cpfFiliado">CPF</label>
                  <input
                    type="text"
                    id="cpfFiliado"
                    placeholder="000.000.000-00"
                    inputmode="numeric"
                    maxlength="14"
                    autocomplete="off"
                    required
                  />
                </div>
                <div class="field field-cr">
                  <label for="crFiliado">N√∫mero do CR</label>
                  <input
                    type="text"
                    id="crFiliado"
                    placeholder="Ex.: 123456"
                    autocomplete="off"
                    minlength="4"
                    required
                  />
                </div>
                <div class="field field-telefone">
                  <label for="telefoneFiliado">Telefone</label>
                  <input
                    type="tel"
                    id="telefoneFiliado"
                    placeholder="(00) 00000-0000"
                    inputmode="tel"
                    maxlength="15"
                    required
                  />
                </div>
                <div class="field field-email">
                  <label for="emailFiliado">E-mail</label>
                  <input
                    type="email"
                    id="emailFiliado"
                    placeholder="email@exemplo.com"
                    autocomplete="email"
                    required
                  />
                </div>
                <div class="actions cadastro-actions">
                  <button type="submit" class="btn btn-secondary">
                    Adicionar Filiado
                  </button>
                </div>
              </div>
              <div
                id="filiadoFormErrors"
                class="filiado-form-errors"
                aria-live="polite"
              ></div>
            </form>
          </div>
          <div id="listaFiliadosGerenciamento"></div>
        </div>
      </section>

      <!-- Se√ß√£o de Relat√≥rios -->
      <section id="relatorios" class="section">
        <div class="card">
          <h2>Relat√≥rios</h2>
          <div class="relatorio-grid">
            <div class="relatorio-card">
              <h3>üìÑ Vendas do Dia</h3>
              <p>Relat√≥rio detalhado de todas as vendas realizadas hoje</p>
              <div class="relatorio-actions">
                <button
                  class="btn btn-primary"
                  onclick="mostrarRelatorioVendasDia()"
                >
                  Ver Relat√≥rio
                </button>
              </div>
            </div>
            <div class="relatorio-card">
              <h3>üìã Todas as Comandas</h3>
              <p>Visualizar todas as comandas fechadas do sistema</p>
              <div class="relatorio-actions">
                <button
                  class="btn btn-info"
                  onclick="mostrarTodasComandasFechadas()"
                >
                  Ver Comandas
                </button>
              </div>
            </div>

            <div class="relatorio-card">
              <h3>üë• Clientes Atendidos</h3>
              <p>Relat√≥rio completo de todos os clientes atendidos</p>
              <div class="relatorio-actions">
                <button
                  class="btn btn-info"
                  onclick="mostrarRelatorioClientes()"
                >
                  Ver Relat√≥rio
                </button>
              </div>
            </div>

            <div class="relatorio-card">
              <h3>Comandas para Impress√£o</h3>
              <p>
                Relat√≥rio di√°rio detalhado de todas as comandas para impress√£o
              </p>
              <div class="relatorio-actions">
                <button
                  class="btn btn-success"
                  onclick="gerarRelatorioComandasImpressao()"
                >
                  Gerar Relat√≥rio
                </button>
              </div>
            </div>

            <div class="relatorio-card">
              <h3>Download do Sistema</h3>
              <p>Baixar arquivo para criar √≠cone na √°rea de trabalho</p>
              <div class="relatorio-actions">
                <button class="btn btn-info" onclick="criarIconeAreaTrabalho()">
                  Baixar Arquivo do Sistema
                </button>
              </div>
            </div>
          </div>
          <div id="relatorioContent"></div>
          <div
            class="inline-actions relatorio-actions hidden"
            id="relatorioActions"
          >
            <button class="btn btn-secondary" onclick="exportarRelatorioCSV()">
              Exportar CSV
            </button>
          </div>
        </div>
      </section>
    </div>

    <!-- Modal para Comanda -->
    <div id="comandaModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h3 id="comandaTitle">Comanda</h3>
          <span class="close" onclick="fecharModal()">&times;</span>
        </div>
        <div class="modal-body">
          <div id="clienteInfo"></div>
          <div class="produtos-section">
            <h4>Adicionar Produtos</h4>
            <div id="produtosDisponiveis"></div>
          </div>
          <div class="itens-comanda">
            <h4>Itens da Comanda</h4>
            <div id="itensComanda"></div>
            <div class="total">
              <strong>Total: R$ <span id="totalComanda">0.00</span></strong>
            </div>
          </div>
          <div id="pagamentoSection"></div>
          <div class="modal-actions">
            <button
              id="fecharComandaBtn"
              class="btn btn-success"
              onclick="fecharComanda()"
              disabled
            >
              Fechar Comanda
            </button>
            <button class="btn btn-secondary" onclick="continuarAtirando()">
              Continuar Atirando
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- √Årea de Impress√£o -->
    <div id="impressaoArea" class="hidden"></div>

    <!-- Modal R√°pido: Cadastrar Novo Filiado -->
    <div
      id="quickFiliadoModal"
      class="modal"
      role="dialog"
      aria-modal="true"
      aria-labelledby="quickFiliadoTitle"
    >
      <div class="modal-content" tabindex="-1">
        <div class="modal-header">
          <h3 id="quickFiliadoTitle">Novo Filiado</h3>
          <span class="close" onclick="fecharQuickFiliado()">&times;</span>
        </div>
        <div class="modal-body">
          <div class="cadastro-form form-filiado">
            <div class="field field-nome">
              <label for="qNomeFiliado">Nome Completo</label>
              <input
                type="text"
                id="qNomeFiliado"
                placeholder="Informe o nome completo"
                autocomplete="name"
                required
              />
            </div>
            <div class="field field-cpf">
              <label for="qCpfFiliado">CPF</label>
              <input
                type="text"
                id="qCpfFiliado"
                placeholder="000.000.000-00"
                inputmode="numeric"
                maxlength="14"
                required
              />
            </div>
            <div class="field field-cr">
              <label for="qCrFiliado">N√∫mero do CR</label>
              <input
                type="text"
                id="qCrFiliado"
                placeholder="Ex.: 123456"
                required
              />
            </div>
            <div class="field field-telefone">
              <label for="qTelefoneFiliado">Telefone</label>
              <input
                type="tel"
                id="qTelefoneFiliado"
                placeholder="(00) 00000-0000"
                inputmode="tel"
                maxlength="15"
                required
              />
            </div>
            <div class="field field-email">
              <label for="qEmailFiliado">E-mail</label>
              <input
                type="email"
                id="qEmailFiliado"
                placeholder="email@exemplo.com"
                autocomplete="email"
                required
              />
            </div>
            <div class="actions cadastro-actions">
              <button
                type="button"
                class="btn btn-secondary"
                onclick="salvarQuickFiliado()"
              >
                Salvar Filiado
              </button>
            </div>
          </div>
          <div
            id="qFiliadoErrors"
            class="filiado-form-errors"
            aria-live="polite"
          ></div>
        </div>
      </div>
    </div>

    <!-- Scripts principais da aplica√ß√£o -->
    <script defer src="Js/script.js"></script>
    <script defer src="Js/pdfGenerator.js"></script>
  </body>
</html>
